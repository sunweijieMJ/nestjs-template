# ECS 服务器环境变量示例 (本地构建模式)
# 复制此文件到项目根目录并重命名为 .env
# cp docker/.env.ecs.example .env

# ========================================
# 应用基础配置
# ========================================
NODE_ENV=production
APP_PORT=3000
APP_NAME="NestJS API"
API_PREFIX=api
APP_FALLBACK_LANGUAGE=zh-CN
APP_HEADER_LANGUAGE=x-custom-lang
FRONTEND_DOMAIN=https://your-frontend-domain.com
BACKEND_DOMAIN=https://your-backend-domain.com

# ========================================
# 初始化配置
# ========================================
# 首次部署时设置为 true 以运行种子数据（省市区、角色、权限等）
# 数据写入后建议设置为 false 或删除此变量
RUN_SEEDS=true

# ========================================
# 日志配置
# ========================================
LOG_LEVEL=info
LOG_PRETTY_PRINT=false

# ========================================
# 数据库配置（PostgreSQL）
# ========================================
DATABASE_TYPE=postgres
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=your-secure-password-here
DATABASE_NAME=nestjs_api
DATABASE_SYNCHRONIZE=false
DATABASE_MAX_CONNECTIONS=100
DATABASE_SSL_ENABLED=false
DATABASE_REJECT_UNAUTHORIZED=false
DATABASE_CA=
DATABASE_KEY=
DATABASE_CERT=
DATABASE_URL=

# ========================================
# JWT 认证配置
# ========================================
# 建议使用强随机字符串: openssl rand -hex 32
AUTH_JWT_SECRET=your-jwt-secret-here
AUTH_JWT_TOKEN_EXPIRES_IN=15m
AUTH_REFRESH_SECRET=your-refresh-secret-here
AUTH_REFRESH_TOKEN_EXPIRES_IN=7d
AUTH_FORGOT_SECRET=your-forgot-secret-here
AUTH_FORGOT_TOKEN_EXPIRES_IN=30m
AUTH_CONFIRM_EMAIL_SECRET=your-confirm-email-secret-here
AUTH_CONFIRM_EMAIL_TOKEN_EXPIRES_IN=1d

# ========================================
# Redis 配置
# ========================================
REDIS_ENABLED=true
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ========================================
# 文件存储配置
# ========================================
FILE_DRIVER=local
ACCESS_KEY_ID=
SECRET_ACCESS_KEY=
AWS_S3_REGION=
AWS_DEFAULT_S3_BUCKET=
AWS_S3_ENDPOINT=

# ========================================
# 邮件配置
# ========================================
MAIL_HOST=smtp.example.com
MAIL_PORT=465
MAIL_USER=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_IGNORE_TLS=false
MAIL_SECURE=true
MAIL_REQUIRE_TLS=true
MAIL_DEFAULT_EMAIL=noreply@example.com
MAIL_DEFAULT_NAME=NestJS API
MAIL_CLIENT_PORT=1080

# ========================================
# 限流配置
# ========================================
THROTTLE_ENABLED=true
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# ========================================
# 监控指标
# ========================================
METRICS_ENABLED=true
METRICS_PATH=metrics

# ========================================
# 阿里云短信服务配置
# ========================================
SMS_ACCESS_KEY_ID=your-sms-access-key-id
SMS_ACCESS_KEY_SECRET=your-sms-access-key-secret
SMS_SIGN_NAME=您的应用签名
SMS_TEMPLATE_CODE=SMS_123456789
SMS_CODE_EXPIRES=300
SMS_CODE_LENGTH=6
SMS_ENDPOINT=dysmsapi.aliyuncs.com
SMS_MOCK_MODE=false
SMS_MAX_ATTEMPTS=5
SMS_RESEND_INTERVAL=60

# ========================================
# 微信集成配置
# ========================================
WECHAT_MINI_APP_ID=your-mini-app-id
WECHAT_MINI_APP_SECRET=your-mini-app-secret
WECHAT_APP_ID=your-wechat-app-id
WECHAT_APP_SECRET=your-wechat-app-secret

# ========================================
# 微信支付配置
# ========================================
WECHAT_PAY_MCH_ID=your-mch-id
WECHAT_PAY_API_V3_KEY=your-api-v3-key
WECHAT_PAY_SERIAL_NO=your-serial-no
WECHAT_PAY_PRIVATE_KEY=your-private-key
WECHAT_PAY_NOTIFY_URL=https://your-backend-domain.com/api/v1/wechat/notify

# ========================================
# 支付宝支付配置
# ========================================
ALIPAY_APP_ID=your-alipay-app-id
ALIPAY_PRIVATE_KEY=your-alipay-private-key
ALIPAY_PUBLIC_KEY=your-alipay-public-key
ALIPAY_GATEWAY=https://openapi.alipay.com/gateway.do
ALIPAY_SIGN_TYPE=RSA2
ALIPAY_CHARSET=utf-8
ALIPAY_NOTIFY_URL=https://your-backend-domain.com/api/v1/alipay/notify
ALIPAY_RETURN_URL=https://your-frontend-domain.com/payment/success
ALIPAY_SANDBOX=false
